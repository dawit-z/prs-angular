<app-nav></app-nav>
<div class="container">
  <h2 class="text-center">Request</h2>
  <table class="table table-lg table-hover">
    <thead class="text-center" *ngIf="request">
      <tr>
        <th>Id</th>
        <th>Username</th>
        <th>Description</th>
        <th>Total</th>
        <th>Status</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody class="text-center">
      <tr>
        <td>{{ request.id }}</td>
        <td *ngIf="request.user">{{ request.user.username }}</td>
        <td>{{ request.description }}</td>
        <td>{{ request.total | currency }}</td>
        <td>{{ request.status }}</td>
        <td>
          <button
            type="button"
            class="btn btn-secondary"
            data-bs-toggle="modal"
            data-bs-target="#staticBackdrop"
            (click)="review()"
          >
            Review
          </button>
        </td>
      </tr>
    </tbody>
  </table>
  <br />
  <h2 class="text-center">Requestlines</h2>
  <div class="d-flex">
    <button
      type="button"
      class="btn btn-success"
      data-bs-toggle="modal"
      data-bs-target="#staticBackdrop"
      (click)="create(request.id)"
    >
      New Requestline
    </button>
  </div>
  <br />

  <table class="table table-sm table-hover">
    <thead class="text-center">
      <tr>
        <th>Id</th>
        <th>Product</th>
        <th>Quantity</th>
        <th>Price</th>
        <th>Line Total</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody class="text-center">
      <tr *ngFor="let line of request.requestlines">
        <td>{{ line.id }}</td>
        <td>{{ line.product.name }}</td>
        <td>{{ line.quantity }}</td>
        <td>{{ line.product.price }}</td>
        <td>{{ line.product.price * line.quantity }}</td>
        <td>
          <div class="btn-group" role="group">
            <button
              type="button"
              class="btn btn-primary"
              data-bs-toggle="modal"
              data-bs-target="#staticBackdrop"
              (click)="edit(line)"
            >
              Edit
            </button>
            <button
              type="button"
              class="btn btn-danger"
              data-bs-toggle="modal"
              data-bs-target="#staticBackdrop"
              (click)="remove(line)"
            >
              Delete
            </button>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
</div>
